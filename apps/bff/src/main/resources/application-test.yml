# Test Configuration
spring:
  # Disable session store (no Redis needed)
  session:
    store-type: none

  # OAuth2 test configuration (minimal valid config)
  security:
    oauth2:
      client:
        registration:
          hsid:
            client-id: test-client
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/api/auth/callback"
            scope: openid,profile,email
            client-authentication-method: none
        provider:
          hsid:
            issuer-uri: http://localhost:8180/realms/test
            authorization-uri: http://localhost:8180/realms/test/protocol/openid-connect/auth
            token-uri: http://localhost:8180/realms/test/protocol/openid-connect/token
            jwk-set-uri: http://localhost:8180/realms/test/protocol/openid-connect/certs
            user-info-uri: http://localhost:8180/realms/test/protocol/openid-connect/userinfo
            user-name-attribute: sub

  # Disable data sources for tests
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration
      - org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration
      - org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration

  # Disable config imports for tests
  config:
    import: optional:classpath:config/security-paths.yml

# Minimal security config for tests
security:
  paths:
    public:
      - pattern: "/**"
        description: "All paths public for tests"

rate-limiting:
  enabled: false

app:
  auth:
    hsid:
      logout-uri: http://localhost:8180/realms/test/protocol/openid-connect/logout
      revocation-uri: http://localhost:8180/realms/test/protocol/openid-connect/revoke
      post-logout-redirect-uri:

  session:
    timeout: 30m
    binding:
      enabled: false
      ip-address: false
      user-agent: false
  authz:
    enabled: false
    permissions-api:
      url: http://localhost:8081
      timeout: 5s
