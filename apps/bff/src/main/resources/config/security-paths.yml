# Security Path Configuration
# Externalized security rules for config-over-code approach

security:
  paths:
    # Public endpoints (no authentication required)
    public:
      - pattern: "/"
        description: "Landing page"
      - pattern: "/api/auth/**"
        description: "Auth endpoints (login, callback, logout)"
      - pattern: "/oauth2/**"
        description: "OAuth2 authorization flow"
      - pattern: "/login/oauth2/**"
        description: "OAuth2 login callback"
      - pattern: "/actuator/health"
        description: "Health check"
      - pattern: "/actuator/info"
        description: "App info"

    # MFE proxy endpoints (OAuth2 Client Credentials) - DEPRECATED
    # Use /api/health/** with dual-auth instead
    proxy-auth:
      - pattern: "/api/mfe/**"
        description: "MFE proxy endpoints (deprecated - use /api/health/**)"
        required-scopes:
          - mfe:read

    # HSID session-only endpoints (browser only)
    session-auth:
      - pattern: "/api/user/**"
        description: "User info endpoints"
      - pattern: "/api/dashboard/**"
        description: "Dashboard endpoints"

    # Dual-auth endpoints (session OR proxy)
    # Accessible via browser session (HSID) or partner headers (PROXY via mTLS ALB)
    dual-auth:
      - pattern: "/api/health/**"
        description: "Health summary endpoints"
      - pattern: "/api/profile/**"
        description: "Member profile endpoints"
      - pattern: "/api/documents/**"
        description: "Document management endpoints"

    # Admin endpoints (future use)
    admin:
      - pattern: "/api/admin/**"
        description: "Admin endpoints"
        required-roles:
          - ADMIN
