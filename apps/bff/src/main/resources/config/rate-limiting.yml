rate-limiting:
  enabled: ${RATE_LIMITING_ENABLED:true}

  default:
    requests-per-second: 10
    burst-capacity: 20

  rules:
    - pattern: "/api/v1/auth/login"
      requests-per-minute: 5
      by: ip
      description: "Prevent brute force login"

    - pattern: "/oauth2/**"
      requests-per-minute: 10
      by: ip
      description: "Prevent OAuth callback abuse"

    - pattern: "/api/v1/**"
      requests-per-second: 50
      by: partner
      description: "API requests"

  persona-rules:
    - personas:
        - individual
        - parent
      requests-per-second: 5
      description: "Regular users"

    - personas:
        - case_worker
      requests-per-second: 50
      description: "Case worker - higher throughput"

    - personas:
        - config
      requests-per-second: 10
      description: "Config users"

    - personas:
        - agent
      requests-per-second: 10
      description: "Agent users"
